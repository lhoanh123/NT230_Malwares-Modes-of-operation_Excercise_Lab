#include <windows.h>
// Khai báo hàm DllMain, là hàm chính của DLL
BOOL WINAPI DllMain (HANDLE hDll, DWORD dwReason, LPVOID lpReserved){
    switch(dwReason){
        // Khi DLL được gắn vào một quá trình
        case DLL_PROCESS_ATTACH:
            // Thực thi lệnh "whoami" và ghi kết quả ra file "whoami.txt"
            system("whoami > C:\\Users\\admin\\Downloads\\Test\\whoami.txt");
            // Mở chương trình máy tính bằng lệnh "WinExec" (cách này không chấp nhận việc chuyển hướng đầu ra như lệnh "system")
            WinExec("calc.exe", 0); 
            break;
        case DLL_PROCESS_DETACH:
            // Khi DLL được tách ra khỏi một quá trình
            break;
        case DLL_THREAD_ATTACH:
            // Khi một luồng mới được tạo trong quá trình
            break;
        case DLL_THREAD_DETACH:
            // Khi một luồng được tách ra khỏi quá trình
            break;
    }
    return TRUE;
}
